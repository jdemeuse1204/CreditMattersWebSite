<template>
    <require from="../customElements/c-readonly.html"></require>
    <require from="../customElements/c-input-validation.html"></require>
    <require from="../views/formatters/date"></require>

    <ai-dialog class="modal-dialog modal-md" id="edit-cds-modal">
        <ai-dialog-body css.bind="{display:model.display.edit}">
            <div class="cm-modal-header">
                <h2>Edit CDS Item</h2>
                <div class="cm-close-modal" click.delegate="controller.cancel()"></div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12">
                        <label>Account Number</label>
                        <c-readonly model.bind="model.creditItem" property-name="AccountNumber"></c-readonly>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-5">
                        <label>Creditor</label>
                        <c-readonly model.bind="model.creditItem.Creditor" property-name="Name"></c-readonly>
                    </div>
                    <div class="col-sm-7">
                        <label>Creditor Address</label>
                        <c-readonly if.bind="hasCreditorAddress" model.bind="model.creditItem.Creditor" property-name="Name"></c-readonly>
                        <div if.bind="!hasCreditorAddress" class="text-danger"><i class="fa fa-exclamation-triangle">&emsp;</i>Creditor Address Missing&emsp;
                            <button type="button" class="btn btn-danger" click.trigger="addAddress()"><i class="fa fa-plus"></i>&nbsp;Add</button>
                        </div>
                    </div>
                </div>
                <div class="row text-center">
                    <h4>TransUnion CDS Status</h4>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Status</label>
                        <div if.bind="model.creditItem.TransUnionInitialStatusId === 1 && model.creditItem.CustomerDisputeStatement.TransUnionDisputeStatusId === 1">Not Reporting</div>
                        <div if.bind="model.creditItem.TransUnionInitialStatusId !== 1 && model.creditItem.CustomerDisputeStatement.TransUnionDisputeStatusId === 1">No Dispute Open</div>
                        <div class="input-group input-group-flat" if.bind="model.creditItem.TransUnionInitialStatusId !== 1 && model.creditItem.CustomerDisputeStatement.TransUnionDisputeStatusId !== 1">
                            <select class="form-control" value.bind="model.creditItem.CustomerDisputeStatement.TransUnionDisputeStatusId" aria-describedby="edit-cds-transunion-response-status-id">
                                <option value="0">Select Response...</option>
                                <option repeat.for="item of responses" model.bind="item.Id">${item.Status}</option>
                            </select>
                            <span class="input-group-addon" id="edit-cds-transunion-response-status-id"><i class="fa fa-asterisk"></i></span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <label>Date Opened</label>
                        <div>${model.creditItem.CustomerDisputeStatement.TransUnionOpenedDate | date}</div>
                    </div>
                    <div class="col-sm-4">
                        <label>Letter Sent Date</label>
                        <div>N/A</div>
                    </div>
                </div>

                <div class="row text-center">
                    <h4>Equifax CDS Status</h4>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Equifax</label>
                        <div if.bind="model.creditItem.EquifaxInitialStatusId === 1 && model.creditItem.CustomerDisputeStatement.EquifaxDisputeStatusId === 1">Not Reporting</div>
                        <div if.bind="model.creditItem.EquifaxInitialStatusId !== 1 && model.creditItem.CustomerDisputeStatement.EquifaxDisputeStatusId === 1">No Dispute Open</div>
                        <div class="input-group input-group-flat" if.bind="model.creditItem.EquifaxInitialStatusId !== 1 && model.creditItem.CustomerDisputeStatement.EquifaxDisputeStatusId !== 1">
                            <select class="form-control" value.bind="model.creditItem.CustomerDisputeStatement.EquifaxDisputeStatusId" aria-describedby="edit-cds-equifax-response-status-id">
                                <option value="0">Select Response...</option>
                                <option repeat.for="item of responses" model.bind="item.Id">${item.Status}</option>
                            </select>
                            <span class="input-group-addon" id="edit-cds-equifax-response-status-id"><i class="fa fa-asterisk"></i></span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <label>Date Opened</label>
                        <div>${model.creditItem.CustomerDisputeStatement.EquifaxOpenedDate | date}</div>
                    </div>
                    <div class="col-sm-4">
                        <label>Letter Sent Date</label>
                        <div>N/A</div>
                    </div>
                </div>

                <div class="row text-center">
                    <h4>Experian CDS Status</h4>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Experian</label>
                        <div if.bind="model.creditItem.ExperianInitialStatusId === 1 && model.creditItem.CustomerDisputeStatement.ExperianDisputeStatusId === 1">Not Reporting</div>
                        <div if.bind="model.creditItem.ExperianInitialStatusId !== 1 && model.creditItem.CustomerDisputeStatement.ExperianDisputeStatusId === 1">No Dispute Open</div>
                        <div class="input-group input-group-flat" if.bind="model.creditItem.ExperianInitialStatusId !== 1 && model.creditItem.CustomerDisputeStatement.ExperianDisputeStatusId !== 1">
                            <select class="form-control" value.bind="model.creditItem.CustomerDisputeStatement.ExperianDisputeStatusId" aria-describedby="edit-cds-experian-response-status-id">
                                <option value="0">Select Response...</option>
                                <option repeat.for="item of responses" model.bind="item.Id">${item.Status}</option>
                            </select>
                            <span class="input-group-addon" id="edit-cds-experian-response-status-id"><i class="fa fa-asterisk"></i></span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <label>Date Opened</label>
                        <div>${model.creditItem.CustomerDisputeStatement.ExperianOpenedDate | date}</div>
                    </div>
                    <div class="col-sm-4">
                        <label>Letter Sent Date</label>
                        <div>N/A</div>
                    </div>
                </div>
            </div>
        </ai-dialog-body>
        <ai-dialog-footer css.bind="{display:model.display.edit}">
            <button type="button" class="btn btn-danger pull-left" click.trigger="controller.cancel()"><i class="fa fa-ban"></i>&nbsp;Cancel</button>
            <button type="button" class="btn btn-success pull-right" click.trigger="controller.ok()"><i class="glyphicon glyphicon-floppy-disk"></i>&nbsp;Save</button>
        </ai-dialog-footer>


        <ai-dialog-body css.bind="{display:model.display.address}">
            <div class="cm-modal-header">
                <h2>Add Address</h2>
                <div class="cm-close-modal" click.delegate="controller.cancel()"></div>
            </div>
            <div class="modal-body">
                <!--<c-input-validation></c-input-validation>-->
            </div>
        </ai-dialog-body>
        <ai-dialog-footer css.bind="{display:model.display.address}">
            <button type="button" class="btn btn-danger pull-left" click.trigger="back()"><i class="fa fa-backward"></i>&nbsp;Back</button>
            <button type="button" class="btn btn-success pull-right" click.trigger="saveAddress()"><i class="glyphicon glyphicon-floppy-disk"></i>&nbsp;Save Address</button>
        </ai-dialog-footer>
    </ai-dialog>
</template>